var angularEmbedly=angular.module("angular-embedly",[]);!function(e){e.provider("embedlyService",function(){function e(){return a?"https":"https"}function t(t){this.embed=function(a,n,r){var m=encodeURIComponent(a),o=e()+"://api.embed.ly/1/oembed?key="+d+"&url="+m;return"undefined"!=typeof n&&(o=o+"&maxwidth="+n),"undefined"!=typeof r&&(o=o+"&scheme="+r),t({method:"GET",url:o})},this.extract=function(a){var n=encodeURIComponent(a),r=e()+"://api.embed.ly/1/extract?key="+d+"&url="+n;return t({method:"GET",url:r})}}var d,a;this.setKey=function(e){return d=e},this.getKey=function(){return d},this.secure=function(e){return e?(a=e,void 0):a},this.$get=["$http",function(e){return new t(e)}]})}(angularEmbedly),function(e){e.controller("emEmbedCtrl",["$scope",function(e){e.embedCode=""}])}(angularEmbedly),function(e){e.directive("emEmbed",["embedlyService",function(e){return{restrict:"E",scope:{urlsearch:"@",maxwidth:"@",scheme:"@",onempty:"&"},controller:"emEmbedCtrl",link:function(t,d){function a(){void 0!=t.onempty&&"function"==typeof t.onempty&&t.onempty()}function n(e){var t='<md-card>                                        <md-card-header>                                          <md-card-avatar>                                            <img src="'+e.favicon_url+'"/>                                          </md-card-avatar>                                          <md-card-header-text>                                            <span class="md-title">'+e.provider_name+'</span>                                            <span class="md-subhead">'+e.provider_display+'</span>                                          </md-card-header-text>                                        </md-card-header>                                        <img src="'+e.images[0].url+'" class="md-card-image" alt="Washed Out">                                        <md-card-title>                                            <md-card-title-text>                                                <span class="md-headline">'+e.title+"</span>                                            </md-card-title-text>                                        </md-card-title>";return e.description&&e.description.length>0&&(t+="<md-card-content>                                        <p>",t+=e.description,t+="</p>                                      </md-card-content>"),t+="</md-card>",t=angular.element("<div>"+t+"</div>"),t.html()}t.$parent.loading_embedly=!1,t.$watch("urlsearch",function(r){var m=t.embedCode;r&&(t.$parent.loading_embedly=!0,e.extract(r,t.maxwidth,t.scheme).then(function(e){switch(t.$parent.loading_embedly=!1,e.data.type){case"video":void 0==e.data.html?a():t.embedCode=e.data.html;break;case"rich":void 0==e.data.html?a():t.embedCode=e.data.html;break;case"photo":void 0==e.data.url?a():t.embedCode='<img src="'+e.data.url+'">';break;case"html":t.embedCode=n(e.data);break;default:a(),t.embedCode=""}m!==t.embedCode&&d.html(t.embedCode)},function(e){console.log("embed error:",e),t.$parent.loading_embedly=!1;var a=t.embedCode;t.embedCode="",a!==t.embedCode&&d.html(t.embedCode)}))})}}}])}(angularEmbedly);